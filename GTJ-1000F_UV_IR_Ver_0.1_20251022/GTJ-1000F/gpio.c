/*
*******************************************************************************
* COPYRIGHT (c) 1992-2012 GASTRON Co.,Ltd. All rights reserved.
*******************************************************************************
* Model Name	: GTF-1100 Series
* Module name	: 
* Description	: 
* Version		: REV 0.51
* Start Date	: 2017.01.17
* Modify Date	: 2018.06.14
* C-Compiler	: avr-gcc
* MPU			: ATmega1281
* Written by	: Min-Sung, Kang (mskang@gastron.com)
*******************************************************************************
*/

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

#include <avr/io.h>

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

#include "global.h"
#include "dbg_printf.h"

#include "gpio.h"

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

void Initialize_GPIO(void);

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

void Initialize_GPIO(void)
{

	//-----+-----+-------------------------------------+
	// PORT A SETTING.(OUT-1, IN-0)
	//-----+-----+-----+-------------------------------+
	//     |BIT7 | IN  | -
	//-----+-----+-----+-------------------------------+
	//     |BIT6 | IN  | -
	//-----+-----+-----+-------------------------------+
	//     |BIT5 | IN  | -
	//-----+-----+-----+-------------------------------+
	//     |BIT4 | IN  | -
	//-----+-----+-----+-------------------------------+
	//     |BIT3 | IN  | -
	//-----+-----+-----+-------------------------------+
	//     |BIT2 | IN  | -
	//-----+-----+-----+-------------------------------+
	//     |BIT1 | IN  | -
	//-----+-----+-----+-------------------------------+
	//     |BIT0 | IN  | -
	//-----+-----+-------------------------------------+
	DDRA 	= 0x0f;	//0000 0000     
	PORTA 	= 0x00;	//0000 0000

	//-----+-----+-------------------------------------+
	// PORT B SETTING.(OUT-1, IN-0)
	//-----+-----+-----+-------------------------------+
	//     |BIT7 | IN  | -
	//-----+-----+-----+-------------------------------+
	//     |BIT6 | IN  | -
	//-----+-----+-----+-------------------------------+
	//     |BIT5 | IN  | -
	//-----+-----+-----+-------------------------------+
	//     |BIT4 | IN  | -
	//-----+-----+-----+-------------------------------+
	//     |BIT3 | OUT | ISP MISO
	//-----+-----+-----+-------------------------------+
	//     |BIT2 | OUT | ISP MOSI
	//-----+-----+-----+-------------------------------+
	//     |BIT1 | OUT | ISP_SCLK
	//-----+-----+-----+-------------------------------+
	//     |BIT0 | IN  | -
	//-----+-----+-------------------------------------+
	DDRB	= 0x07;	//0000 0111
	PORTB	= 0x00;	//0000 0000

	//-----+-----+-------------------------------------+
	// PORT C SETTING.(OUT-1, IN-0)
	//-----+-----+-----+-------------------------------+
	//     |BIT7 | OUT | Test Point 4
	//-----+-----+-----+-------------------------------+
	//     |BIT6 | OUT | D/O ON LED
	//-----+-----+-----+-------------------------------+
	//     |BIT5 | OUT | D/O GRN LED
	//-----+-----+-----+-------------------------------+
	//     |BIT4 | OUT | D/O BLU LED
	//-----+-----+-----+-------------------------------+
	//     |BIT3 | OUT | D/O RED LED
	//-----+-----+-----+-------------------------------+
	//     |BIT2 | OUT | mA GRN LED
	//-----+-----+-----+-------------------------------+
	//     |BIT1 | OUT | mA BLU LED
	//-----+-----+-----+-------------------------------+
	//     |BIT0 | OUT | mA RED LED
	//-----+-----+-------------------------------------+
	DDRC 	= 0xFF;	//1111 1111
	PORTC	= 0x00;	//0000 0000

	//-----+-----+-------------------------------------+
	// PORT D SETTING.(OUT-1, IN-0)
	//-----+-----+-----+-------------------------------+
	//     |BIT7 | IN  | -
	//-----+-----+-----+-------------------------------+
	//     |BIT6 | IN  | -
	//-----+-----+-----+-------------------------------+
	//     |BIT5 | IN  | -
	//-----+-----+-----+-------------------------------+
	//     |BIT4 | IN  | -
	//-----+-----+-----+-------------------------------+
	//     |BIT3 | IN  | MODBUS_TX
	//-----+-----+-----+-------------------------------+
	//     |BIT2 | IN  | MODBUS_RX
	//-----+-----+-----+-------------------------------+
	//     |BIT1 | IN  | -
	//-----+-----+-----+-------------------------------+
	//     |BIT0 | IN  | -
	//-----+-----+-------------------------------------+
	DDRD	= 0x00;	//0000 0000
	PORTD	= 0x00;	//0000 0000

	//-----+-----+-------------------------------------+
	// PORT E SETTING.(OUT-1, IN-0)
	//-----+-----+-----+-------------------------------+
	//     |BIT7 | IN  | KEY_D/O
	//-----+-----+-----+-------------------------------+
	//     |BIT6 | IN  | KEY_TEST(MODE)
	//-----+-----+-----+-------------------------------+
	//     |BIT5 | IN  | KEY_DOWN
	//-----+-----+-----+-------------------------------+
	//     |BIT4 | IN  | KEY_UP
	//-----+-----+-----+-------------------------------+
	//     |BIT3 | IN  | KEY_RESET
	//-----+-----+-----+-------------------------------+
	//     |BIT2 | IN  | KEY_FUNC
	//-----+-----+-----+-------------------------------+
	//     |BIT1 | IN  | DBG_TX
	//-----+-----+-----+-------------------------------+
	//     |BIT0 | IN  | DBG_RX
	//-----+-----+-------------------------------------+
	DDRE	= 0x00;	//0000 0000
	PORTE	= 0xFC;	//0000 0000

	//-----+-----+-------------------------------------+
	// PORT F SETTING.(OUT-1, IN-0)
	//-----+-----+-----+-------------------------------+
	//     |BIT7 | IN  | -
	//-----+-----+-----+-------------------------------+
	//     |BIT6 | IN  | -
	//-----+-----+-----+-------------------------------+
	//     |BIT5 | IN  | -
	//-----+-----+-----+-------------------------------+
	//     |BIT4 | IN  | -
	//-----+-----+-----+-------------------------------+
	//     |BIT3 | IN  | aTEMP
	//-----+-----+-----+-------------------------------+
	//     |BIT2 | IN  | aPOUT
	//-----+-----+-----+-------------------------------+
	//     |BIT1 | IN  | aP24
	//-----+-----+-----+-------------------------------+
	//     |BIT0 | IN  | ADIN
	//-----+-----+-------------------------------------+
	DDRF	= 0x00;	//0000 0000
	PORTF	= 0x00;	//0000 0000

	//-----+-----+-------------------------------------+
	// PORT G SETTING.(OUT-1, IN-0)
	//-----+-----+-----+-------------------------------+
	//     |BIT7 | IN  | -
	//-----+-----+-----+-------------------------------+
	//     |BIT6 | IN  | -
	//-----+-----+-----+-------------------------------+
	//     |BIT5 | OUT | Test Point 3
	//-----+-----+-----+-------------------------------+
	//     |BIT4 | IN  | -
	//-----+-----+-----+-------------------------------+
	//     |BIT3 | IN  | -
	//-----+-----+-----+-------------------------------+
	//     |BIT2 | IN  | -
	//-----+-----+-----+-------------------------------+
	//     |BIT1 | IN  | -
	//-----+-----+-----+-------------------------------+
	//     |BIT0 | IN  | -
	//-----+-----+-------------------------------------+
	DDRG	= 0x21;	//0010 0000
	PORTG	= 0x00;	//0000 0000

	//-----+-----+-------------------------------------+
	// PORT H SETTING.(OUT-1, IN-0)
	//-----+-----+-----+-------------------------------+
	//     |BIT7 | OUT | Test Point 5
	//-----+-----+-----+-------------------------------+
	//     |BIT6 | OUT | Potentiometer-SDA
	//-----+-----+-----+-------------------------------+
	//     |BIT5 | OUT | Potentiometer-SCL
	//-----+-----+-----+-------------------------------+
	//     |BIT4 | IN  | -
	//-----+-----+-----+-------------------------------+
	//     |BIT3 | OUT | 485_RXEN
	//-----+-----+-----+-------------------------------+
	//     |BIT2 | OUT | MODBUS_RXEN
	//-----+-----+-----+-------------------------------+
	//     |BIT1 | IN  | 485_TX
	//-----+-----+-----+-------------------------------+
	//     |BIT0 | IN  | 485_RX
	//-----+-----+-------------------------------------+
	DDRH	= 0xEC;	//1110 1100
	PORTH	= 0x00;	//0000 0000

	//-----+-----+-------------------------------------+
	// PORT J SETTING.(OUT-1, IN-0)
	//-----+-----+-----+-------------------------------+
	//     |BIT7 | OUT | POUT Shutdown
	//-----+-----+-----+-------------------------------+
	//     |BIT6 | IN | Trouble Relay_N
	//-----+-----+-----+-------------------------------+
	//     |BIT5 | IN | Trouble Relay_P
	//-----+-----+-----+-------------------------------+
	//     |BIT4 | IN | Alarm Relay_N
	//-----+-----+-----+-------------------------------+
	//     |BIT3 | IN | Alarm Relay_P
	//-----+-----+-----+-------------------------------+
	//     |BIT2 | OUT | nEXT_B.I.T
	//-----+-----+-----+-------------------------------+
	//     |BIT1 | IN  | -
	//-----+-----+-----+-------------------------------+
	//     |BIT0 | IN  | -
	//-----+-----+-------------------------------------+
	//DDRJ	= 0x8C;	//1000 0000
	//PORTJ	= 0x0C;	//0000 0000
	DDRJ	= 0x84;	//1000 0100
	PORTJ	= 0x78;	//0000 0000

	//-----+-----+-------------------------------------+
	// PORT K SETTING.(OUT-1, IN-0)
	//-----+-----+-----+-------------------------------+
	//     |BIT7 | OUT | LCD_BL
	//-----+-----+-----+-------------------------------+
	//     |BIT6 | OUT | LCD_RS
	//-----+-----+-----+-------------------------------+
	//     |BIT5 | OUT | LCD_EN
	//-----+-----+-----+-------------------------------+
	//     |BIT4 | OUT | LCD_WE
	//-----+-----+-----+-------------------------------+
	//     |BIT3 | OUT | LCD_D7
	//-----+-----+-----+-------------------------------+
	//     |BIT2 | OUT | LCD_D6
	//-----+-----+-----+-------------------------------+
	//     |BIT1 | OUT | LCD_D5
	//-----+-----+-----+-------------------------------+
	//     |BIT0 | OUT | LCD_D4
	//-----+-----+-------------------------------------+
	DDRK	= 0xFF;	//1111 1111
	PORTK	= 0x00;	//1000 0000

	//-----+-----+-------------------------------------+
	// PORT L SETTING.(OUT-1, IN-0)
	//-----+-----+-----+-------------------------------+
	//     |BIT7 | IN  | -
	//-----+-----+-----+-------------------------------+
	//     |BIT6 | IN  | -
	//-----+-----+-----+-------------------------------+
	//     |BIT5 | IN  | -
	//-----+-----+-----+-------------------------------+
	//     |BIT4 | OUT | Test LED
	//-----+-----+-----+-------------------------------+
	//     |BIT3 | OUT | RS485 LED
	//-----+-----+-----+-------------------------------+
	//     |BIT2 | OUT | Trouble LED
	//-----+-----+-----+-------------------------------+
	//     |BIT1 | OUT | Alarm LED
	//-----+-----+-----+-------------------------------+
	//     |BIT0 | OUT | Status LED
	//-----+-----+-------------------------------------+
	DDRL	= 0xFF;	//0001 1111
	PORTL	= 0x00;	//0000 0000
	
	MCUCR = 0x00;
}

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
